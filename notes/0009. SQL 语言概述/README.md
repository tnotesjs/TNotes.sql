# [0009. SQL è¯­è¨€æ¦‚è¿°](https://github.com/Tdahuyou/TNotes.mysql/tree/main/notes/0009.%20SQL%20%E8%AF%AD%E8%A8%80%E6%A6%82%E8%BF%B0)

<!-- region:toc -->

- [1. ğŸ“ æ¦‚è¿°](#1--æ¦‚è¿°)
- [2. ğŸ“’ SQL å’Œ DBMS çš„å…³ç³»](#2--sql-å’Œ-dbms-çš„å…³ç³»)
- [3. ğŸ“’ SQL çš„åˆ†ç±»](#3--sql-çš„åˆ†ç±»)

<!-- endregion:toc -->

## 1. ğŸ“ æ¦‚è¿°

- **SQL**
  - SQLï¼ˆStructured Query Languageï¼Œç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼‰æ˜¯ç”¨äºç®¡ç†å’Œæ“ä½œå…³ç³»å‹æ•°æ®åº“çš„æ ‡å‡†è¯­è¨€ã€‚
  - SQL å…è®¸ç”¨æˆ·å¯¹æ•°æ®åº“è¿›è¡Œ **å®šä¹‰ã€æŸ¥è¯¢ã€æ›´æ–°å’Œæ§åˆ¶æƒé™** ç­‰æ“ä½œã€‚
  - SQL ä¸æ˜¯ä¸€ç§ç¼–ç¨‹è¯­è¨€ï¼Œè€Œæ˜¯ä¸€ç§ **å£°æ˜å¼è¯­è¨€**ã€‚
  - ç”¨æˆ·é€šè¿‡ SQL å‘Šè¯‰æ•°æ®åº“â€œè¦åšä»€ä¹ˆâ€ï¼Œè€Œä¸æ˜¯â€œæ€ä¹ˆåšâ€ã€‚
  - æ•°æ®åº“ç³»ç»Ÿï¼ˆDBMSï¼‰è´Ÿè´£æ‰§è¡Œ SQL è¯­å¥å¹¶è¿”å›ç»“æœã€‚
  - å¦‚æœæŠŠæ•°æ®åº“æ¯”ä½œä¸€ä¸ªå›¾ä¹¦é¦†ç®¡ç†å‘˜ï¼Œé‚£ SQL å°±æ˜¯ä½ å‘ä»–æçš„è¯·æ±‚ï¼šâ€œå¸®æˆ‘æ‰¾ä¸€ä¸‹æ‰€æœ‰å…³äº MySQL çš„ä¹¦â€ã€‚
  - SQL æ˜¯æ“ä½œæ•°æ®åº“çš„æ ‡å‡†è¯­è¨€ï¼Œå®ƒå¯ä»¥è®©ä½ ä¸æ•°æ®åº“è¿›è¡Œäº¤äº’ï¼Œå®ç°æ•°æ®çš„æŸ¥è¯¢ã€æ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤ç­‰åŠŸèƒ½ã€‚
- **SQL åœ¨æ•°æ®åº“ç³»ç»Ÿä¸­çš„ä½ç½®**

```mermaid
graph TD
    A[æ•°æ®åº“åº”ç”¨ç¨‹åºï¼ˆDB Applicationï¼‰] --> B[SQL è¯­å¥]
    B --> C[æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDBMSï¼‰å¦‚ï¼šMySQLã€Oracleâ€¦â€¦]
    C --> D[æ•°æ®åº“ï¼ˆDBï¼‰å®é™…å­˜å‚¨çš„æ•°æ®]
```

- **SQL çš„åº”ç”¨åœºæ™¯**

| åœºæ™¯         | ç”¨é€”                         |
| ------------ | ---------------------------- |
| Web åº”ç”¨å¼€å‘ | ç”¨æˆ·ç™»å½•ã€å•†å“å±•ç¤ºã€è®¢å•å¤„ç† |
| æŠ¥è¡¨ç³»ç»Ÿ     | ç»Ÿè®¡é”€å”®é¢ã€ç”Ÿæˆæ—¥/æœˆæŠ¥è¡¨    |
| æ•°æ®åˆ†æ     | æŸ¥è¯¢ç”¨æˆ·è¡Œä¸ºã€è®¡ç®—è½¬åŒ–ç‡     |
| ç³»ç»Ÿåå°     | æ·»åŠ /åˆ é™¤/ä¿®æ”¹é…ç½®ä¿¡æ¯       |
| ç§»åŠ¨ç«¯ App   | ä¸åç«¯ API é€šä¿¡ï¼Œè·å–æ•°æ®    |

- **SQL çš„ç‰¹ç‚¹**

| ç‰¹ç‚¹         | è¯´æ˜                                                     |
| ------------ | -------------------------------------------------------- |
| ç®€æ´æ˜“å­¦     | è¯­æ³•æ¥è¿‘è‡ªç„¶è¯­è¨€ï¼Œå­¦ä¹ æˆæœ¬ä½ã€‚                           |
| é«˜åº¦éè¿‡ç¨‹åŒ– | åªéœ€å‘Šè¯‰æ•°æ®åº“â€œè¦åšä»€ä¹ˆâ€ï¼Œä¸éœ€è¦å†™â€œæ€ä¹ˆåšâ€               |
| é¢å‘é›†åˆ     | æ“ä½œçš„æ˜¯è¡¨ä¸­çš„ä¸€ç»„è®°å½•ï¼Œè€Œéå•æ¡è®°å½•                     |
| æ ‡å‡†åŒ–       | ANSI/ISO SQL æ˜¯æ ‡å‡†è§„èŒƒï¼Œå„å¤§æ•°æ®åº“æ”¯æŒç•¥æœ‰å·®å¼‚          |
| å¹³å°æ— å…³æ€§   | å¯è¿è¡Œåœ¨å„ç§æ•°æ®åº“ç³»ç»Ÿä¸Šï¼ˆMySQLã€Oracleã€PostgreSQL ç­‰ï¼‰ |

- å…¶ä¸­â€œç®€æ´æ˜“å­¦â€ã€â€œé«˜åº¦éè¿‡ç¨‹åŒ–â€å¯ä»¥è¯´è¿™æ˜¯â€œå£°æ˜å¼â€è¯­è¨€çš„å…±åŒç‰¹ç‚¹

## 2. ğŸ“’ SQL å’Œ DBMS çš„å…³ç³»

- SQL æ˜¯ä½ è·Ÿæ•°æ®åº“æ²Ÿé€šçš„è¯­è¨€ã€‚
- DBMS æ˜¯å¬æ‡‚è¿™ä¸ªè¯­è¨€çš„â€œç¿»è¯‘å®˜â€ã€‚

| åç§°   | å«ä¹‰           | ä¸¾ä¾‹                                       |
| ------ | -------------- | ------------------------------------------ |
| SQL    | ä¸€ç§è¯­è¨€       | `SELECT`, `INSERT`, `UPDATE` ç­‰è¯­å¥        |
| DBMS   | æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ | MySQLã€Oracleã€SQL Server ç­‰è½¯ä»¶           |
| æ•°æ®åº“ | å­˜å‚¨æ•°æ®çš„åœ°æ–¹ | ä¸€ä¸ªå­¦æ ¡çš„æˆç»©æ•°æ®åº“ã€ä¸€ä¸ªå•†åŸçš„å•†å“æ•°æ®åº“ |

- ä»¥ SQL ä¸ MySQL çš„å…³ç³»ä¸ºä¾‹ï¼š

| é¡¹ç›®     | SQL                     | MySQL                      |
| -------- | ----------------------- | -------------------------- |
| ç±»å‹     | è¯­è¨€                    | è½¯ä»¶                       |
| åŠŸèƒ½     | æ“ä½œæ•°æ®åº“              | æä¾›æ•°æ®åº“æœåŠ¡             |
| ä½¿ç”¨æ–¹å¼ | ç¼–å†™ SQL è¯­å¥           | è§£æå¹¶æ‰§è¡Œ SQL             |
| æ˜¯å¦é€šç”¨ | âœ… æ˜¯ï¼Œé€‚ç”¨äºå¤šç§æ•°æ®åº“ | âŒ å¦ï¼Œä¸“ç”¨äº MySQL æ•°æ®åº“ |

- ä½ å¯ä»¥ç”¨ç›¸åŒçš„ SQL è¯­å¥åœ¨ Oracle å’Œ MySQL ä¸­æŸ¥è¯¢æ•°æ®ã€‚
- ä½†æœ‰äº›ç»†èŠ‚ï¼ˆå¦‚åˆ†é¡µã€å‡½æ•°ï¼‰å¯èƒ½ä¸åŒã€‚

## 3. ğŸ“’ SQL çš„åˆ†ç±»

| åˆ†ç±» | è‹±æ–‡å | ä¸­æ–‡å | åŠŸèƒ½ |
| --- | --- | --- | --- |
| DDL | Data Definition Language | æ•°æ®å®šä¹‰è¯­è¨€ | ç”¨äºå®šä¹‰æ•°æ®åº“å¯¹è±¡ï¼Œåˆ›å»ºã€ä¿®æ”¹æˆ–åˆ é™¤æ•°æ®åº“å¯¹è±¡ï¼ˆå¦‚è¡¨ã€ç´¢å¼•ã€è§†å›¾ï¼‰ |
| DML | Data Manipulation Language | æ•°æ®æ“ä½œè¯­è¨€ | ç”¨äºæ“ä½œè¡¨ä¸­çš„æ•°æ®ï¼ˆCRUD - åˆ›å»ºã€æŸ¥è¯¢ã€æ›´æ–°ã€åˆ é™¤ï¼‰ |
| DCL | Data Control Language | æ•°æ®æ§åˆ¶è¯­è¨€ | ç”¨äºç®¡ç†æ•°æ®åº“è®¿é—®æƒé™ï¼ˆå¦‚æˆæƒã€æ’¤é”€æƒé™ï¼‰ |
| TCL | Transaction Control Language | äº‹åŠ¡æ§åˆ¶è¯­è¨€ | ç”¨äºç®¡ç†å¤šä¸ª SQL æ“ä½œä½œä¸ºä¸€ä¸ªäº‹åŠ¡ï¼ˆå¦‚æäº¤ã€å›æ»šï¼‰ |

::: code-group

```sql [DDL]
-- åˆ›å»ºè¡¨
CREATE TABLE users (
  id INT PRIMARY KEY,
  name VARCHAR(50),
  age INT
);

-- ä¿®æ”¹è¡¨ç»“æ„
ALTER TABLE users ADD COLUMN email VARCHAR(100);

-- åˆ é™¤è¡¨
DROP TABLE users;
```

```sql [DML]
-- æ’å…¥æ•°æ®
INSERT INTO users (id, name, age) VALUES (1, 'Alice', 23);

-- æŸ¥è¯¢æ•°æ®
SELECT * FROM users WHERE age > 20;

-- æ›´æ–°æ•°æ®
UPDATE users SET age = 24 WHERE name = 'Alice';

-- åˆ é™¤æ•°æ®
DELETE FROM users WHERE id = 1;
```

```sql [DCL]
-- æˆæƒ
GRANT SELECT ON users TO 'student'@'%';

-- æ’¤é”€æƒé™
REVOKE INSERT ON users FROM 'student'@'%';
```

```sql [TCL]
-- å¼€å§‹äº‹åŠ¡
START TRANSACTION;

-- æäº¤äº‹åŠ¡
COMMIT;

-- å›æ»šäº‹åŠ¡
ROLLBACK;
```

:::
