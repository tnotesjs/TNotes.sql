# [0020. MySQL Cluster 简介](https://github.com/Tdahuyou/TNotes.mysql/tree/main/notes/0020.%20MySQL%20Cluster%20%E7%AE%80%E4%BB%8B)

<!-- region:toc -->

- [1. 📝 概述](#1--概述)
- [2. 📒 MySQL Cluster 的核心组件](#2--mysql-cluster-的核心组件)
- [3. 📒 MySQL Cluster 的主要特点](#3--mysql-cluster-的主要特点)
- [4. 📒 MySQL Cluster 的局限性](#4--mysql-cluster-的局限性)
- [5. 📒 适用场景](#5--适用场景)
- [6. 📒 简单示意图](#6--简单示意图)
- [7. 📒 如何安装和配置 MySQL Cluster？](#7--如何安装和配置-mysql-cluster)
- [8. 📒 总结](#8--总结)

<!-- endregion:toc -->

## 1. 📝 概述

- **MySQL Cluster**
  - MySQL Cluster 是 MySQL 提供的一种 **高可用、分布式、内存为中心的数据库架构**，专门用于需要 **高并发、低延迟和持续可用性** 的应用场景。
  - MySQL Cluster 是基于 **NDB（Network Database）存储引擎** 的集群解决方案。它将数据分布在多个节点上，支持自动故障转移、负载均衡和横向扩展，确保即使部分节点宕机，整个系统仍能继续运行。

## 2. 📒 MySQL Cluster 的核心组件

MySQL Cluster 由以下几种类型的节点组成：

| 节点类型 | 名称 | 功能说明 |
| --- | --- | --- |
| **Data Node** | 数据节点 | 存储实际的数据，通常成对配置以实现冗余（Replica） |
| **SQL Node (API Node)** | SQL 节点 / 应用接口节点 | 接收客户端连接，执行 SQL 查询，如 `mysqld` 实例 |
| **Management Node (MGM Node)** | 管理节点 | 管理整个集群配置和状态，负责协调各节点之间的通信与故障恢复 |

> 📌 所有节点都可以部署在不同的物理服务器或虚拟机上，实现分布式的数据库服务。

## 3. 📒 MySQL Cluster 的主要特点

| 特性 | 描述 |
| --- | --- |
| **高可用性（High Availability, HA）** | 支持数据自动复制（Replication），节点故障时自动切换，不影响服务 |
| **分布式架构（Distributed Architecture）** | 数据可跨多个节点存储，支持水平扩展 |
| **实时访问与低延迟** | 数据主要驻留在内存中，读写速度快 |
| **多点写入（Multi-Master）** | 多个 SQL 节点可以同时进行写操作 |
| **自动负载均衡** | 请求可以在多个节点之间自动分发 |
| **线性扩展性** | 可通过增加数据节点来提升性能和容量 |
| **透明性** | 应用程序无需感知后端节点数量和分布，只需连接任意 SQL 节点即可 |

## 4. 📒 MySQL Cluster 的局限性

| 局限性 | 说明 |
| --- | --- |
| **仅支持 NDB 引擎表** | MySQL Cluster 中只有使用 NDB 存储引擎的表才能享受集群功能，其他引擎（如 InnoDB）不参与集群 |
| **内存依赖性强** | 数据默认全部加载到内存中，对内存消耗大，成本较高 |
| **事务支持有限** | 对复杂事务的支持不如 InnoDB 引擎完善 |
| **部署和维护复杂** | 配置、监控、调优相对复杂，适合专业 DBA 使用 |
| **不适合大数据量 OLAP 场景** | 更适合 OLTP 类型的高频小数据量访问，而非大数据分析类应用 |

## 5. 📒 适用场景

MySQL Cluster 特别适用于以下场景：

- **电信行业**：如计费系统、用户管理
- **在线游戏**：需要快速响应、持续可用的游戏数据库
- **金融交易系统**：要求高并发、低延迟、强一致性
- **物联网（IoT）平台**：处理大量设备的实时数据写入与查询
- **电商秒杀系统**：高并发下的订单处理

## 6. 📒 简单示意图

```
+------------------+       +------------------+
|   Application    |       |   Application    |
+------------------+       +------------------+
           |                        |
           v                        v
+------------------+       +------------------+
|   SQL Node 1     |<----->|   SQL Node 2     |
+------------------+       +------------------+
      |                            |
      v                            v
+------------------+       +------------------+
|   Data Node A    |<----->|   Data Node B    |
+------------------+       +------------------+
            \         Mgmt Node        /
             \________________________/
```

## 7. 📒 如何安装和配置 MySQL Cluster？

安装 MySQL Cluster 涉及多个节点的配置，步骤如下简要说明：

1. 下载 MySQL Cluster 版本（社区版或企业版）
2. 在不同主机上分别部署：
   - 管理节点（`ndb_mgmd`）
   - 数据节点（`ndbd` 或 `ndbmtd`）
   - SQL 节点（`mysqld`）
3. 编写配置文件（如 `config.ini`, `my.cnf`）
4. 启动管理节点 → 数据节点 → SQL 节点
5. 使用 `ndb_mgm` 工具查看集群状态

> 如果你需要详细的搭建教程，我可以为你提供一步一步的指导！

## 8. 📒 总结

| 项目     | 说明                             |
| -------- | -------------------------------- |
| 是否开源 | 是（社区版）                     |
| 存储引擎 | 主要是 NDB                       |
| 高可用   | 支持自动故障转移                 |
| 分布式   | 支持多节点部署                   |
| 适用场景 | OLTP、高并发、低延迟、高可用需求 |
| 不适合   | OLAP、大数据量、复杂事务处理     |
